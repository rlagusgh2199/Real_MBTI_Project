# Real MBTI – Specification (v2)

## 1. 프로젝트 개요

Real MBTI는 설문 없이, **실제 행동 데이터(카카오톡, 유튜브 시청 기록, SNS 활동 기록)**를 기반으로  
사용자의 언어·행동 패턴을 분석하여 **MBTI 성향을 추정**하는 시스템이다.

MBTI 계산은 **규칙/수식 기반 알고리즘**으로 재현성과 설명 가능성을 확보하고,  
LLM(Ollama)은 MBTI 결과를 기반으로 **심층 리포트를 생성하는 역할**을 맡는다.

최종 산출물은 **웹 기반 인터페이스**에서  
- 데이터 업로드 → 분석 → 점수 & 신뢰도 → LLM 리포트  
흐름으로 제공되는 **실서비스급 프로토타입**이다.

---

## 2. 주요 사용자 시나리오 (User Scenarios)

### **시나리오 1 — 카카오톡 내보내기 기반 MBTI 분석**
1. 사용자가 카카오톡 대화 내보내기(.txt)를 업로드한다.  
2. 시스템은 대화 내용을 파싱하여  
   - 발화 길이  
   - 대화 상대 수  
   - 질문 비율  
   - 감정 단어 비율  
   - 시간대 패턴  
   등을 추출한다.  
3. 규칙 기반 알고리즘으로 MBTI 4축 점수를 계산한다.  
4. Ollama LLM이 분석 리포트를 생성한다.  
5. 웹 UI에 결과 + 신뢰도와 함께 표시한다.

---

### **시나리오 2 — 유튜브 시청 기록 기반 MBTI 분석**
1. 사용자가 유튜브 시청 기록 내보내기 파일(HTML/JSON)을 업로드한다.  
2. 선호 콘텐츠 패턴을 분석한다.  
   - 정보형/감성형 콘텐츠 비율  
   - 강의 vs 예능  
   - 표현 강도(감정적 제목/썸네일)  
   - 영상 길이 패턴  
3. 특징을 MBTI 축에 매핑하여 점수 계산.  
4. LLM이 "시청 기록 기반 MBTI 해석"을 작성.  
5. 결과 + 신뢰도 출력.

---

### **시나리오 3 — SNS 활동 로그 기반 MBTI 분석**
1. 사용자가 인스타/트위터 등의 활동 로그를 업로드한다.  
2. 텍스트/활동 패턴(게시물 길이, 해시태그 성향, 감정 표현 패턴 등)을 추출.  
3. MBTI 점수 계산 후 LLM 분석 리포트 생성.  
4. 결과 + 신뢰도 표시.

---

### **시나리오 4 — 멀티 소스 결합 분석 (선택 기능)**
- 카톡 + 유튜브 + SNS 모두 업로드하면  
  → 각 소스의 특징을 조정 가중치로 통합  
  → 전체적인 MBTI 성향을 계산  
- 신뢰도는 소스 다양성과 데이터 양에 따라 상승

---

## 3. 기능 요구사항 (Functional Requirements)

### **3.1 데이터 입력 (파일 업로드)**  
- 지원 포맷:
  - **카카오톡 내보내기 txt**
  - **유튜브 시청 기록 HTML/JSON**
  - **SNS 내보내기 파일(txt, csv, json 등)**
- 웹 UI에서 파일 선택 후 업로드 가능  
- 로컬 처리, 서버 업로드 없음

---

### **3.2 데이터 파싱(data_loader 모듈)**

#### 카카오톡
- 날짜/시간/발화자/메시지 분리
- 감정 단어 / 질문 패턴 등 feature 추출용 데이터 구조화

#### 유튜브
- “제목”, “채널명”, “시청 시간대”, “길이(가능한 경우)” 추출
- 주제 카테고리 분류(LLM 없이 규칙 기반 또는 간단 매핑)

#### SNS
- 게시물 텍스트 정제
- 해시태그 패턴
- 감정/표현 패턴

---

### **3.3 특징 추출(feature_extractor 모듈)**  
**특징 카테고리 예시:**

#### *공통 특징*
- 단어 수 / 문장 수
- 평균 문장 길이
- 긍정/부정 감정 단어 비율
- 성향 패턴 (질문, 감탄, 자기 언급)

#### *카카오톡 특화*
- 메시지 시간대 패턴 (야행성/주간 활동)
- 질문 비율, 답장 속도(평균)
- 이모티콘 사용 비율
- 대화 참여도 (전체 메시지 대비 본인 메시지 비율)

#### *유튜브 특화*
- 영상 유형 비율(정보/엔터/교육/감성)
- 영상 길이 패턴(짧은 영상 위주 vs 긴 영상 위주)
- 채널 종류 다양성

#### *SNS 특화*
- 감정 표현 강도
- 글 길이 패턴
- 해시태그 사용 성향

각 특징은 **MBTI 4축(E/I, S/N, T/F, J/P)**에 매핑될 수 있도록 수치화한다.

---

### **3.4 MBTI 점수 계산(mbti_scorer 모듈)**

MBTI 4축 각각을 **0~100 점수로 계산**:

- **E/I**  
  - 외부 자극/상호작용 빈도  
  - 질문/감탄/메시지 에너지  
  - SNS 활동량  
- **S/N**  
  - 표현의 구체성 vs 추상성  
  - 시청 콘텐츠 패턴(정보적/분석적 vs 감성적/직관적)  
- **T/F**  
  - 감정 단어 비율  
  - 감정적 표현 빈도  
- **J/P**  
  - 글 구조화 정도  
  - 활동 시간 패턴의 규칙성  
  - SNS 게시 주기

> 점수 알고리즘은 규칙 기반 수식으로 설계하여,  
> **결과의 일관성/투명성/검증 가능성** 확보.

---

### **3.5 신뢰도(Confidence) 계산 기능**

신뢰도는 다음 요소를 조합하여 **0~100 점수**로 산출:

1. **데이터 양 (0~40점)**  
   - 메시지/로그 개수  
   - SNS 글 수  
   - 유튜브 시청 기록 개수  
2. **데이터 기간 (0~30점)**  
   - 최근 1일 보다는 1~3개월 분석이 더 안정적  
3. **소스 다양성 (0~30점)**  
   - 카톡만 → 낮음  
   - 카톡+유튜브+SNS → 매우 높음

신뢰도는 UI와 LLM 리포트에 함께 표시된다.  
(예: "신뢰도: 72/100 — 최근 2개월 카톡·유튜브 기반")

---

### **3.6 LLM 리포트 생성(llm_reporter 모듈)**

입력 데이터:
- MBTI 4축 점수
- 최종 MBTI 타입
- 특징 값들
- 신뢰도 점수

출력:
- **한 줄 요약**
- **축별 상세 설명**
- **행동 패턴 기반 성향 분석**
- **소스별 성향 차이(카톡 vs 유튜브 등)**
- **한계/편향/주의사항 자동 언급**

LLM은 **Ollama Local LLM** 모델 사용 (예: llama3, qwen2.5 등)

---

### **3.7 웹 UI (필수)**

#### 기능
- 파일 업로드 (카톡/유튜브/SNS)
- 분석 버튼
- 결과 페이지:
  - MBTI 타입/점수(4축 막대 그래프)
  - 신뢰도 표시
  - LLM 리포트
- 결과 다운로드(.txt or .md) 지원

#### 기술스택
- Python Flask 또는 FastAPI + HTML/JS  
- 필요한 경우 React로 확장 가능

---

## 4. 시스템 아키텍처 (Architecture)

[Client(Web)]
    ↓ 파일 업로드

[Flask / FastAPI Web Server]

    ├─ data_loader (파일 파싱)
    │     ├─ KakaoParser
    │     ├─ YoutubeParser
    │     └─ SNSParser
    │
    ├─ feature_extractor (특징 추출)
    │
    ├─ mbti_scorer (규칙 기반 점수 계산)
    │
    ├─ confidence_engine (신뢰도 계산)
    │
    └─ llm_reporter (Ollama 호출)
            ↓
        결과 JSON 반환

[Client(Web)]
    → 분석 결과 + 그래프 + 신뢰도 + LLM 리포트 표시
---

## 5. 개발 단계 (Development Milestones)

1. **데이터 파서 구축**
   - 카카오톡 → txt 파서
   - 유튜브 → html/json 파서
   - SNS → 텍스트 기반 파서

2. **특징 추출 엔진 구현**

3. **MBTI 점수/수식 설계 & 구현**

4. **신뢰도 계산 모듈 구축**

5. **LLM 연동 + 프롬프트 엔지니어링**

6. **웹 UI 구축**
   - 업로드 → 분석 → 결과 페이지

7. **통합 테스트**

8. **발표/시연용 리포트 및 샘플 데이터 정리**

---

## 6. 확장 기능 (선택, 시간이 남을 경우)
- 여러 사용자 프로필 저장
- 데이터 소스별 MBTI 차이 비교
- 대화 상대별 MBTI 분석
- 시청 기록 기반 관심사 분류 모델 추가
- 결과를 PDF로 저장

---

## 7. 비기능 요구사항 (NFR)
- 모든 데이터는 **로컬 PC에서만 처리**
- 처리 속도: 5초 내 분석 완료 목표
- Ollama 모델 실행 필요 (메모리 8GB 이상 권장)
- 대용량 파일(수만 메시지)도 처리 가능해야 함

